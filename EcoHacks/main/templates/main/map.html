<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google Maps Example</title>
  <style>
    #map {
      height: 400px;
      width: 100%;
    }
  </style>
  <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC4twqZA-AhOLxsZiKICQgST-pzMfTcxgA&callback=initMap"></script>
</head>
<body>
  <div id="map"></div>

  <script>
    function initMap() {
      // Set the initial map center and zoom level
      const mapOptions = {
        center: { lat: -34.397, lng: 150.644 },
        zoom: 8,
      };

      // Create a new Google Maps object and attach it to the 'map' div
      const map = new google.maps.Map(document.getElementById("map"), mapOptions);

      // Get the values of 'location' and 'destination' from the URL
      const urlParams = new URLSearchParams(window.location.search);
      const origin = urlParams.get('location');
      const destination = urlParams.get('destination');

      // Get the values of 'hidden-location' and 'hidden-destination'
      const hiddenLocation = urlParams.get('hidden-location');
      const hiddenDestination = urlParams.get('hidden-destination');

      // Set the values of the 'location' and 'destination' fields in the form
      document.getElementById('location').value = hiddenLocation || origin;
      document.getElementById('destination').value = hiddenDestination || destination;
      // Initialize the directions service and renderer
      const directionsService = new google.maps.DirectionsService();
      const directionsRenderer = new google.maps.DirectionsRenderer();
      directionsRenderer.setMap(map);

      // Calculate the routes
      calculateRoutes(directionsService, directionsRenderer, origin, destination);
    }

    function calculateRoutes(directionsService, directionsRenderer, origin, destination) {
      if (!origin || !destination) {
        alert("Please enter an origin and destination.");
        return;
      }

      const travelModes = [
        google.maps.TravelMode.DRIVING,
        google.maps.TravelMode.TRANSIT,
        google.maps.TravelMode.BICYCLING, // For biking
        google.maps.TravelMode.WALKING, // For walking
      ];

      travelModes.forEach((mode) => {
        calculateRouteForMode(directionsService, directionsRenderer, origin, destination, mode);
      });
    }

    function calculateRouteForMode(directionsService, directionsRenderer, origin, destination, travelMode) {
      const request = {
        origin: origin,
        destination: destination,
        travelMode: travelMode,
      };

      directionsService.route(request, (result, status) => {
        if (status === google.maps.DirectionsStatus.OK) {
          console.log(`Route for ${travelMode}:`, result);
          // Display the calculated route on the map
        }
      });
    }
  </script>
</body>
<div>
    <label for="location">Location:</label>
    <input type="text" id="location" name="location">
    <br>
    <label for="destination">Destination:</label>
    <input type="text" id="destination" name="destination">
    <br>
    <button onclick="calculateRoutes()">Calculate Routes</button>
  </div>
<div>
  <button onclick="showRoute(google.maps.TravelMode.DRIVING)">Driving</button>
  <button onclick="showRoute(google.maps.TravelMode.TRANSIT)">Public Transport</button>
  <button onclick="showRoute(google.maps.TravelMode.BICYCLING)">Biking</button>
  <button onclick="showRoute(google.maps.TravelMode.WALKING)">Walking</button>
</div>
</html>
